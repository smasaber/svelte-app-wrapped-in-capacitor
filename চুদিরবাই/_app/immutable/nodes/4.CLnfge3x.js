var Le=t=>{throw TypeError(t)};var Ne=(t,e,a)=>e.has(t)||Le("Cannot "+a);var fe=(t,e,a)=>(Ne(t,e,"read from private field"),a?a.call(t):e.get(t)),ue=(t,e,a)=>e.has(t)?Le("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),ve=(t,e,a,s)=>(Ne(t,e,"write to private field"),s?s.call(t,a):e.set(t,a),a);import"../chunks/CWj6FrbW.js";import{az as xt,g as kt,a1 as pe,i as F,v as At,j as Et,V as c,ae as St,Y as Tt,_ as Mt,a0 as We,a2 as me,u as X,aq as Pt,at as zt,a3 as it,n as lt,a4 as Ct,aJ as he,ax as ot,aa as je,aE as Ht,aK as Ae,aL as Ee,aM as Lt,aw as Nt,aN as Wt,q as jt,aO as Se,aP as Ut,ar as Dt,B as It,aQ as ct,an as Ot,aR as Ue,aS as Rt,aC as qt,G as dt,aD as ft,W as Ft,aT as Bt,aU as Jt,aV as Vt,M as Kt,p as Qt,f as R,h as Yt,s as I,a as _e,t as V,b as W,c as Gt,$ as Xt,d as q,aW as Zt,r as U,aH as L,aI as re,a8 as De}from"../chunks/BXas2nfe.js";import{o as $t,d as ea,e as ta,s as Z}from"../chunks/C3C2XIiK.js";import{p as aa,i as Y}from"../chunks/DFsQ-PpB.js";import{r as ra,a as Ie,s as Oe}from"../chunks/EQO9jSDW.js";import{t as sa,c as na}from"../chunks/BRzKQYUk.js";import{i as ia,a as la,b as oa,c as ca}from"../chunks/UPuWPrWL.js";function da(t,e){return e}function fa(t,e,a,s){for(var n=[],d=e.length,f=0;f<d;f++)Lt(e[f].e,n,!0);var h=d>0&&n.length===0&&a!==null;if(h){var b=a.parentNode;Nt(b),b.append(a),s.clear(),J(t,e[0].prev,e[d-1].next)}Wt(n,()=>{for(var w=0;w<d;w++){var y=e[w];h||(s.delete(y.k),J(t,y.prev,y.next)),jt(y.e,!h)}})}function se(t,e,a,s,n,d=null){var f=t,h={flags:e,items:new Map,first:null},b=(e&ct)!==0;if(b){var w=t;f=F?pe(At(w)):w.appendChild(xt())}F&&Et();var y=null,H=!1,v=St(()=>{var _=a();return It(_)?_:_==null?[]:ot(_)});kt(()=>{var _=c(v),l=_.length;if(H&&l===0)return;H=l===0;let P=!1;if(F){var S=Tt(f)===Mt;S!==(l===0)&&(f=We(),pe(f),me(!1),P=!0)}if(F){for(var A=null,M,u=0;u<l;u++){if(X.nodeType===Pt&&X.data===zt){f=X,P=!0,me(!1);break}var r=_[u],m=s(r,u);M=ut(X,h,A,null,r,m,u,n,e,a),h.items.set(m,M),A=M}l>0&&pe(We())}F||ua(_,h,f,n,e,s,a),d!==null&&(l===0?y?it(y):y=lt(()=>d(f)):y!==null&&Ct(y,()=>{y=null})),P&&me(!0),c(v)}),F&&(f=X)}function ua(t,e,a,s,n,d,f){var z,D,C,T;var h=(n&Rt)!==0,b=(n&(Se|Ee))!==0,w=t.length,y=e.items,H=e.first,v=H,_,l=null,P,S=[],A=[],M,u,r,m;if(h)for(m=0;m<w;m+=1)M=t[m],u=d(M,m),r=y.get(u),r!==void 0&&((z=r.a)==null||z.measure(),(P??(P=new Set)).add(r));for(m=0;m<w;m+=1){if(M=t[m],u=d(M,m),r=y.get(u),r===void 0){var o=v?v.e.nodes_start:a;l=ut(o,e,l,l===null?e.first:l.next,M,u,m,s,n,f),y.set(u,l),S=[],A=[],v=l.next;continue}if(b&&va(r,M,m,n),(r.e.f&he)!==0&&(it(r.e),h&&((D=r.a)==null||D.unfix(),(P??(P=new Set)).delete(r))),r!==v){if(_!==void 0&&_.has(r)){if(S.length<A.length){var i=A[0],p;l=i.prev;var x=S[0],E=S[S.length-1];for(p=0;p<S.length;p+=1)Re(S[p],i,a);for(p=0;p<A.length;p+=1)_.delete(A[p]);J(e,x.prev,E.next),J(e,l,x),J(e,E,i),v=i,l=E,m-=1,S=[],A=[]}else _.delete(r),Re(r,v,a),J(e,r.prev,r.next),J(e,r,l===null?e.first:l.next),J(e,l,r),l=r;continue}for(S=[],A=[];v!==null&&v.k!==u;)(v.e.f&he)===0&&(_??(_=new Set)).add(v),A.push(v),v=v.next;if(v===null)continue;r=v}S.push(r),l=r,v=r.next}if(v!==null||_!==void 0){for(var k=_===void 0?[]:ot(_);v!==null;)(v.e.f&he)===0&&k.push(v),v=v.next;var g=k.length;if(g>0){var j=(n&ct)!==0&&w===0?a:null;if(h){for(m=0;m<g;m+=1)(C=k[m].a)==null||C.measure();for(m=0;m<g;m+=1)(T=k[m].a)==null||T.fix()}fa(e,k,j,y)}}h&&Ot(()=>{var B;if(P!==void 0)for(r of P)(B=r.a)==null||B.apply()}),je.first=e.first&&e.first.e,je.last=l&&l.e}function va(t,e,a,s){(s&Se)!==0&&Ue(t.v,e),(s&Ee)!==0?Ue(t.i,a):t.i=a}function ut(t,e,a,s,n,d,f,h,b,w){var y=(b&Se)!==0,H=(b&Ut)===0,v=y?H?Ht(n,!1,!1):Ae(n):n,_=(b&Ee)===0?f:Ae(f),l={i:_,v,k:d,a:null,e:null,prev:a,next:s};try{return l.e=lt(()=>h(t,v,_,w),F),l.e.prev=a&&a.e,l.e.next=s&&s.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function Re(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,d=t.e.nodes_start;d!==s;){var f=Dt(d);n.before(d),d=f}}function J(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function qe(t,e,a){qt(()=>{var s=dt(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var n=!1,d={};ft(()=>{var f=a();Ft(f),n&&Bt(d,f)&&(d=f,s.update(f))}),n=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function $(t,e,a,s,n,d){var f=t.__className;if(F||f!==a||f===void 0){var h=sa(a,s,d);(!F||h!==t.getAttribute("class"))&&(h==null?t.removeAttribute("class"):t.className=h),t.__className=a}else if(d&&n!==d)for(var b in d){var w=!!d[b];(n==null||w!==!!n[b])&&t.classList.toggle(b,w)}return d}function pa(t){let e=0,a=Ae(0),s;return()=>{Jt()&&(c(a),ft(()=>(e===0&&(s=dt(()=>t(()=>Vt(a)))),e+=1,()=>{Kt().then(()=>{e-=1,e===0&&(s==null||s(),s=void 0)})})))}}var te,ae;class ma{constructor(e,a){ue(this,te);ue(this,ae);ve(this,te,e),ve(this,ae,pa(a))}get current(){return fe(this,ae).call(this),fe(this,te).call(this)}}te=new WeakMap,ae=new WeakMap;const ha=/\(.+\)/,_a=new Set(["all","print","screen","and","or","not","only"]);class ba extends ma{constructor(e,a){let s=ha.test(e)||e.split(/[\s,]+/).some(d=>_a.has(d.trim()))?e:`(${e})`;const n=window.matchMedia(s);super(()=>n.matches,d=>$t(n,"change",d))}}function ya(t){const e=JSON.parse(t);return e.data&&(e.data=oa(e.data,ca.decoders)),e}function be(t){return HTMLElement.prototype.cloneNode.call(t)}function ye(t,e=()=>{}){const a=async({action:n,result:d,reset:f=!0,invalidateAll:h=!0})=>{d.type==="success"&&(f&&HTMLFormElement.prototype.reset.call(t),h&&await ia()),(location.origin+location.pathname===n.origin+n.pathname||d.type==="redirect"||d.type==="error")&&await la(d)};async function s(n){var P,S,A,M,u;if(((P=n.submitter)!=null&&P.hasAttribute("formmethod")?n.submitter.formMethod:be(t).method)!=="post")return;n.preventDefault();const f=new URL((S=n.submitter)!=null&&S.hasAttribute("formaction")?n.submitter.formAction:be(t).action),h=(A=n.submitter)!=null&&A.hasAttribute("formenctype")?n.submitter.formEnctype:be(t).enctype,b=new FormData(t),w=(M=n.submitter)==null?void 0:M.getAttribute("name");w&&b.append(w,((u=n.submitter)==null?void 0:u.getAttribute("value"))??"");const y=new AbortController;let H=!1;const _=await e({action:f,cancel:()=>H=!0,controller:y,formData:b,formElement:t,submitter:n.submitter})??a;if(H)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});h!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(h)?h:"application/x-www-form-urlencoded");const m=h==="multipart/form-data"?b:new URLSearchParams(b),o=await fetch(f,{method:"POST",headers:r,cache:"no-store",body:m,signal:y.signal});l=ya(await o.text()),l.type==="error"&&(l.status=o.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}await _({action:f,formData:b,formElement:t,update:r=>a({action:f,result:l,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",s),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",s)}}}var Fe="mz3PUW_p",Be=["#FFC700","#FF0000","#2E3191","#41BBC7"],Je=3500,Ve=.5,Ke=150,Qe="mix",Ye=12,Ge="",Xe=!0,Ze=800,$e=1600;function ge(t,e={}){let{colors:a=Be,duration:s=Je,force:n=Ve,particleCount:d=Ke,particleShape:f=Qe,particleSize:h=Ye,particleClass:b=Ge,destroyAfterDone:w=Xe,stageHeight:y=Ze,stageWidth:H=$e}=e;(function(u){if(document.querySelector("style[data-neoconfetti]"))return;const r=we("style");r.dataset.neoconfetti="",r.textContent=u,xe(document.head,r)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",y+"px");let v=[],_=[];const l=()=>ee(O()*(Aa-1)),P=(u,r)=>f!=="rectangles"&&(u==="circles"||Ea(r));function S(u,r){const m=l(),o=P(f,m),i=(E,k)=>u.style.setProperty(E,k+"");i("--xlp",ke(ne(rt(r,90)-180),0,180,-H/2,H/2)+"px"),i("--dc",s-ee(1e3*O())+"ms");const p=O()<wa?G(O()*xa,2):0;i("--x1",p),i("--x2",-1*p),i("--x3",p),i("--x4",G(ne(ke(ne(rt(r,90)-180),0,180,-1,1)),4)),i("--y1",G(O()*tt,4)),i("--y2",G(O()*n*(vt()?1:-1),4)),i("--y3",tt),i("--y4",G(ka(ke(ne(r-180),0,180,n,-n),0),4)),i("--w",(o?h:ee(4*O())+h/2)+"px"),i("--h",(o?h:ee(2*O())+h)+"px");const x=m.toString(2).padStart(3,"0").split("");i("--hr",x.map(E=>+E/2+"").join(" ")),i("--r",x.join(" ")),i("--rd",G(O()*(ga-et)+et)+"ms"),i("--br",o?"50%":0)}let A;function M(){t.innerHTML="",clearTimeout(A),v=at(d,a),_=function(u,r=[],m){const o=[];for(const{color:i}of r){const p=we("div");p.className=`${Fe} ${m}`,p.style.setProperty("--bgc",i);const x=we("div");xe(p,x),xe(u,p),o.push(p)}return o}(t,v,b);for(const[u,r]of st(_))S(r,v[+u].degree);A=setTimeout(()=>{w&&(t.innerHTML="")},s)}return M(),{update(u){const r=u.particleCount??Ke,m=u.particleShape??Qe,o=u.particleSize??Ye,i=u.particleClass??Ge,p=u.colors??Be,x=u.stageHeight??Ze,E=u.duration??Je,k=u.force??Ve,g=u.stageWidth??$e,j=u.destroyAfterDone??Xe;v=at(r,p);let z=!1;if(r===d){_=Array.from(t.querySelectorAll(`.${Fe}`));for(const[D,{color:C}]of st(v)){const T=_[+D];JSON.stringify(a)!==JSON.stringify(p)&&T.style.setProperty("--bgc",C),m!==f&&T.style.setProperty("--br",P(m,l())?"50%":"0"),i!==b&&(b&&T.classList.remove(b),i&&T.classList.add(i))}}else z=!0;w&&!j&&clearTimeout(A),t.style.setProperty("--sh",x+"px"),s=E,a=p,n=k,d=r,f=m,h=o,b=i,w=j,y=x,H=g,z&&M()},destroy(){t.innerHTML="",clearTimeout(A)}}}var et=200,ga=800,wa=.1,xa=.3,tt=.5,ne=Math.abs,O=Math.random,ee=Math.round,ka=Math.max,we=t=>document.createElement(t),xe=(t,e)=>t.appendChild(e),at=(t,e)=>Array.from({length:t},(a,s)=>({color:e[s%e.length],degree:360*s/t})),G=(t,e=2)=>ee((t+Number.EPSILON)*10**e)/10**e,ke=(t,e,a,s,n)=>(t-e)*(n-s)/(a-e)+s,rt=(t,e)=>t+e>360?t+e-360:t+e,vt=()=>O()>.5,st=Object.entries,Aa=6,Ea=t=>t!==1&&vt();function nt(t,e,a){var n;t.preventDefault();const s=t.target.getAttribute("data-key");s==="backspace"?(De(e,c(e).slice(0,-1)),(n=a())!=null&&n.badGuess&&a(a().badGuess=!1,!0)):c(e).length<5&&De(e,c(e)+s)}var Sa=R('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Ta=R('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),Ma=R('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Pa=R('<p class="svelte-1pg2j5l"> </p>'),za=R('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ca=R('<button formaction="?/update" name="key"> </button>'),Ha=R('<div class="row svelte-1pg2j5l"></div>'),La=R('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Na=R('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Wa=R('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Ba(t,e){Qt(e,!0);let a=aa(e,"form",15);const s=new ba("(prefers-reduced-motion: reduce)");let n=L(()=>e.data.answers.at(-1)==="xxxxx"),d=L(()=>c(n)?-1:e.data.answers.length),f=L(()=>e.data.guesses[c(d)]||""),h=L(()=>c(f).length===5);const b=L(()=>{let o={},i={};return e.data.answers.forEach((p,x)=>{const E=e.data.guesses[x];for(let k=0;k<5;k+=1){const g=E[k];p[k]==="x"?(o[g]="exact",i[g]="correct"):o[g]||(o[g]=p[k]==="c"?"close":"missing",i[g]=p[k]==="c"?"present":"absent")}}),{classnames:o,description:i}}),w=L(()=>c(b).classnames),y=L(()=>c(b).description);function H(o){var i;o.metaKey||o.key==="Enter"&&!c(h)||(i=document.querySelector(`[data-key="${o.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var v=Wa();ta("keydown",Zt,H),Yt(o=>{var i=Sa();Xt.title="Sverdle",W(o,i)});var _=I(_e(v),2),l=I(q(_),2);let P;se(l,20,()=>Array.from(Array(6).keys()),o=>o,(o,i)=>{var p=Ma();const x=L(()=>i===c(d));var E=_e(p),k=q(E);U(E);var g=I(E,2);let j;se(g,20,()=>Array.from(Array(5).keys()),z=>z,(z,D)=>{var C=Ta();const T=L(()=>c(x)?c(f):e.data.guesses[i]),B=L(()=>{var N;return(N=e.data.answers[i])==null?void 0:N[D]}),Te=L(()=>{var N;return((N=c(T))==null?void 0:N[D])??""}),pt=L(()=>c(x)&&D===c(T).length),Me=L(()=>c(B)==="x"),Pe=L(()=>c(B)==="c"),ze=L(()=>c(B)==="_");let Ce;var He=q(C),ie=I(He),mt=q(ie);{var ht=N=>{var oe=re("(correct)");W(N,oe)},_t=(N,oe)=>{{var bt=K=>{var ce=re("(present)");W(K,ce)},yt=(K,ce)=>{{var gt=Q=>{var de=re("(absent)");W(Q,de)},wt=Q=>{var de=re("empty");W(Q,de)};Y(K,Q=>{c(ze)?Q(gt):Q(wt,!1)},ce)}};Y(N,K=>{c(Pe)?K(bt):K(yt,!1)},oe)}};Y(mt,N=>{c(Me)?N(ht):N(_t,!1)})}U(ie);var le=I(ie,2);ra(le),U(C),V(N=>{Ce=$(C,1,"letter svelte-1pg2j5l",null,Ce,N),Z(He,`${c(Te)??""} `),le.disabled=!c(x),Ie(le,c(Te))},[()=>({exact:c(Me),close:c(Pe),missing:c(ze),selected:c(pt)})]),W(z,C)}),U(g),V(z=>{Z(k,`Row ${i+1}`),j=$(g,1,"row svelte-1pg2j5l",null,j,z)},[()=>({current:c(x)})]),W(o,p)}),U(l);var S=I(l,2),A=q(S);{var M=o=>{var i=za(),p=_e(i);{var x=g=>{var j=Pa(),z=q(j);U(j),V(()=>Z(z,`the answer was "${e.data.answer??""}"`)),W(g,j)};Y(p,g=>{!c(n)&&e.data.answer&&g(x)})}var E=I(p,2),k=q(E);U(E),V(()=>Z(k,`${c(n)?"you won :)":"game over :("} play again?`)),W(o,i)},u=o=>{var i=La(),p=q(i);let x;var E=I(p,2);E.__click=[nt,f,a];var k=I(E,2);se(k,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],g=>g,(g,j)=>{var z=Ha();se(z,21,()=>j,da,(D,C)=>{var T=Ca();T.__click=[nt,f,a];var B=q(T,!0);U(T),V(()=>{Oe(T,"data-key",c(C)),$(T,1,na(c(w)[c(C)]),"svelte-1pg2j5l"),T.disabled=c(h),Ie(T,c(C)),Oe(T,"aria-label",`${c(C)??""} ${(c(y)[c(C)]||"")??""}`),Z(B,c(C))}),W(D,T)}),U(z),W(g,z)}),U(i),V(g=>{p.disabled=!c(h),x=$(p,1,"svelte-1pg2j5l",null,x,g)},[()=>({selected:c(h)})]),W(o,i)};Y(A,o=>{c(n)||e.data.answers.length>=6?o(M):o(u,!1)})}U(S),U(_),qe(_,(o,i)=>ye==null?void 0:ye(o,i),()=>()=>({update:o})=>{o({reset:!1})});var r=I(_,2);{var m=o=>{var i=Na();qe(i,(p,x)=>ge==null?void 0:ge(p,x),()=>({particleCount:s.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),W(o,i)};Y(r,o=>{c(n)&&o(m)})}V(o=>P=$(l,1,"grid svelte-1pg2j5l",null,P,o),[()=>{var o;return{playing:!c(n),"bad-guess":(o=a())==null?void 0:o.badGuess}}]),W(t,v),Gt()}ea(["click"]);export{Ba as component};
